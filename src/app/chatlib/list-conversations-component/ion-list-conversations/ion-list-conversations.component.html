<!-- <div id='c21-app-list-conversations'>
  <div *ngFor="let conversation of listConversations | slice:0:limit">
    <button tabindex="1103" class="c21-item-conversation" (click)="openConversationByID(conversation)">
      <div class="c21-body-conv">
        <div class="c21-left-conv">
          <div class="c21-ball" [style.background-color]="conversation?.color">
            <span class="c21-ball-label" [innerHTML]="conversation?.avatar"></span>
            <div *ngIf="conversation.image" #avatarImage class="c21-avatar-image" [style.background-image]="'url(' + conversation.image + ')'"></div>
          </div>
        </div>
        <div class="c21-right-conv">
          <div class="c21-last-time">{{conversation.time_last_message}}</div>
          <div class="truncate c21-name">{{conversation.sender_fullname }}</div>
          <div [class.not-read]="conversation.is_new" class="truncate c21-msg" [innerHTML]="conversation.last_message_text"></div>
        </div>
        <!- - <div *ngIf="conversation.is_new" [ngStyle] = "{ 'background-color': styleMap.get('themeColor') }" class="c21-divBudge">{{conversation.badge}}</div>
        <div *ngIf="conversation.archived" class="c21-lablel-close">{{ translationMap.get('CLOSED') }}</div> - ->
      </div>
      <div class="clear"></div>
    </button>
    
  </div>
</div> -->

<!-- -------------------------------------------------------------------------- -->
<!-- New   <ion-spinner class="spinner-middle" style="margin-left: 19px;"></ion-spinner> -->
<!-- -------------------------------------------------------------------------- -->
<!-- <ion-item *ngIf="isOnline === false" button="true" lines="none" class="ion-no-padding waiting-for-connection">
  <div tabindex="0"></div>
  <ion-avatar item-start>
    <div class="sk-fading-circle">
      <div class="sk-circle1 sk-circle"></div>
      <div class="sk-circle2 sk-circle"></div>
      <div class="sk-circle3 sk-circle"></div>
      <div class="sk-circle4 sk-circle"></div>
      <div class="sk-circle5 sk-circle"></div>
      <div class="sk-circle6 sk-circle"></div>
      <div class="sk-circle7 sk-circle"></div>
      <div class="sk-circle8 sk-circle"></div>
      <div class="sk-circle9 sk-circle"></div>
      <div class="sk-circle10 sk-circle"></div>
      <div class="sk-circle11 sk-circle"></div>
      <div class="sk-circle12 sk-circle"></div>
    </div>
  </ion-avatar>
  <ion-label part="message-text" class="waiting-for-network-msg"> Waiting for network</ion-label>
</ion-item> -->

<!-- <ion-item>
  <div tabindex="0"></div>
  <iframe loading="lazy" width="100%" height="70px" style="border: unset;" [src]="PROJECT_FOR_PANEL"></iframe>
</ion-item>  -->
<!-- <ion-item button="true" (click)="openUnsevedConversationIframe()">
  <app-project-item
  (projectIdEvent)="getLastProjectId($event)"></app-project-item>
</ion-item> -->


<!-- <ion-item-sliding disabled>
  <ion-item>
    <ion-label>
      Sliding Item, Icons Start
    </ion-label>
  </ion-item>
  <ion-item-options>
    <ion-item-option color="primary">
      <ion-icon slot="start" ios="ellipsis-horizontal" md="ellipsis-vertical"></ion-icon>
      More
    </ion-item-option>
    <ion-item-option color="secondary">
      <ion-icon slot="start" name="archive"></ion-icon>
      Archive
    </ion-item-option>
  </ion-item-options>
</ion-item-sliding> -->


<ion-item button="true" lines="none" class="ion-no-padding" [class.ion-selected]="conversation?.uid === uidConvSelected"
  *ngFor="let conversation of listConversations; let index= index" (click)="openConversationByID(conversation)" detail=false>
  <div tabindex="0"></div>

  <!-- <div [class.selected]="conversation.uid === uidConvSelected"></div> -->
  <div>
    <ion-avatar item-start>
      <!-- [style.background-color]="conversation.color"  -->
      <div #avatarPlaceholder class="avatar-placeholder"
        [ngStyle]="{'background':  'linear-gradient(rgb(255,255,255) -125%,' + conversation.color + ')'}"
        [innerHTML]="conversation.avatar"></div>
      <div *ngIf="conversation.image" #avatarImage class="avatar-profile"
        [style.background-image]="'url(' + conversation.image + ')'"></div>
      <!-- <div *ngIf="getImageAvatar(conversation.sender)" #avatarImage class="avatar-profile" [style.background-image]="'url(' + getImageAvatar(conversation.sender) + ')'"></div> -->
    </ion-avatar>
  </div>
  <div class="conv-container">
    <ion-label>
      <div class="conversation_project truncate">
        <!-- DIRECT CONV -->
        <div *ngIf="conversation.channel_type === TYPE_DIRECT">
          <svg xmlns="http://www.w3.org/2000/svg" height="15"  width="15" viewBox="0 0 24 24" fill="#000000"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
          <span  class="truncate">{{translationsMap.get('DIRECT_CHAT')}}</span>
        </div>
        <!-- GROUP CONV -->
        <div *ngIf="conversation.uid.startsWith(TYPE_GROUP)">
          <svg xmlns="http://www.w3.org/2000/svg" height="15"  width="15" viewBox="0 0 24 24" fill="#000000"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
          <span  class="truncate">{{translationsMap.get('GROUP_CHAT')}}</span>
        </div>
        <!-- SUPPORT-GROUP CONV -->
        <div  *ngIf="conversation.uid.startsWith(TYPE_SUPPORT_GROUP)">
          <svg xmlns="http://www.w3.org/2000/svg" data-v-78d18411="" width="15" height="15" fill="none" viewBox="0 0 24 24" class="inbox-icon"><path d="M22.002 12C22.002 6.477 17.524 2 12 2 6.476 1.999 2 6.477 2 12.001c0 5.186 3.947 9.45 9.001 9.952V20.11c-.778-.612-1.478-1.905-1.939-3.61h1.94V15H8.737a18.969 18.969 0 0 1-.135-5h6.794c.068.64.105 1.31.105 2h1.5c0-.684-.033-1.353-.095-2h3.358c.154.64.237 1.31.237 2h1.5ZM4.786 16.5h2.722l.102.396c.317 1.17.748 2.195 1.27 3.015a8.532 8.532 0 0 1-4.094-3.41ZM3.736 10h3.358a20.847 20.847 0 0 0-.095 2c0 1.043.075 2.051.217 3H4.043a8.483 8.483 0 0 1-.544-3c0-.682.08-1.347.232-1.983L3.736 10Zm5.122-5.902.023-.008C8.16 5.222 7.611 6.748 7.298 8.5H4.25c.905-2 2.56-3.587 4.608-4.402Zm3.026-.594L12 3.5l.126.006c1.262.126 2.48 2.125 3.045 4.995H8.83c.568-2.878 1.79-4.88 3.055-4.996Zm3.343.76-.107-.174.291.121a8.533 8.533 0 0 1 4.339 4.29h-3.048c-.298-1.665-.806-3.125-1.475-4.237Z M12 19a1 1 0 0 0 1 1h3v2h-.5a.5.5 0 1 0 0 1h4a.5.5 0 0 0 0-1H19v-2h3a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v5Z" fill="currentColor"/></svg>
          <span *ngIf="conversation?.attributes?.project_name" class="truncate">{{conversation?.attributes?.project_name}}</span>
          <span *ngIf="!conversation?.attributes?.project_name" class="truncate">{{conversation?.attributes?.projectId}}</span>
        </div>
      </div>
      <div style="display: flex;">
        <span class="conversation_with truncate" [class.not-read]="conversation.is_new">
          {{conversation.conversation_with_fullname}}
        </span>
      </div>
      <div class="conversation_message truncate-conv-msg" [ngClass]="{'truncate-on-desktop': !isApp}">
  
        <!-- -------------------------------------------------------------------------- -->
        <!-- if conversation type is image display the image icon before the message -->
        <!-- -------------------------------------------------------------------------- -->
        <!-- <div *ngIf="conversation.type === 'image'" class="icon-image-before-msg-wpr">
          <ion-icon name="image-outline" class="icon-image-before-msg"></ion-icon>
        </div>
        <p [class.not-read]="conversation.is_new" class="truncate" [ngClass]="{'truncate-on-desktop': !isApp}"
          [innerHTML]="conversation.last_message_text"></p> -->
  
        <!-- <div *ngIf="conversation.type === 'image'" class="icon-image-before-msg-wpr"> -->
        <ion-icon *ngIf="conversation.type === 'image' && conversation.type !== 'file' " name="image-outline"
          class="icon-image-before-msg"></ion-icon>
        <ion-icon *ngIf="conversation.type === 'file'  && conversation.type !== 'image'" name="attach-outline"
          class="icon-attach-before-msg"></ion-icon>
        <!-- </div> -->
        <!-- [innerHTML]="conversation.last_message_text" -->
        <span [class.not-read]="conversation.is_new">
          {{ conversation.last_message_text }}
        </span>
      </div>
    </ion-label>
  </div>

  <ion-note *ngIf="!conversation.archived" class="conversation_time" [ngClass]="{'is-on-mobile': isApp}">
    {{conversation.timestamp | amTimeAgo}}
  </ion-note>
  <ion-note item-end *ngIf="conversation?.archived" class="conversation_time">
    <span *ngIf="(conversation.timestamp | amDateFormat:'YYYY') === currentYear">
      {{browserLang === 'en' ? (conversation.timestamp | amDateFormat:'MMM DD') : (conversation.timestamp| amDateFormat:'DD MMM')}}
      <!-- {{conversation.timestamp | amDateFormat:'DD MMM'}} -->
    </span>
    <span *ngIf="(conversation.timestamp | amDateFormat:'YYYY') !== currentYear">
      {{browserLang === 'en' ? (conversation.timestamp | amDateFormat:'MMM DD YYYY') : (conversation.timestamp| amDateFormat:'DD MMM YYYY') }}
      <!-- {{conversation.timestamp | amDateFormat:'DD MMM YYYY'}} -->
    </span>
  </ion-note>

  <ion-buttons slot="end">
    <ion-button *ngIf="!conversation.archived" [tooltip]="archiveTooltip"  [options]="tooltip_options" placement="bottom"  content-type="template"
      [ngClass]="{'hide': !isApp, 'button-on-desktop': !isApp, 'button-on-mobile': isApp  }"
      id="{{ 'close_conversation_button' + conversation.uid }}" class="close-conversation-button" ion-button clear
      item-end (click)="closeConversation(conversation);$event.stopPropagation();" padding>
      <ion-icon slot="icon-only" style="display:block;" id="{{ 'close_button_icon' + conversation.uid }}" name="archive-outline" item-end></ion-icon>

      <ng-template #archiveTooltip>
        <span *ngIf="conversation?.recipient.startsWith('support-group')"> {{ translationsMap?.get('Resolve')}} </span>
        <span *ngIf="!conversation?.recipient.startsWith('support-group')"> {{ translationsMap?.get('Archive') }} </span>
      </ng-template>
    </ion-button>
    <!-- <ion-button *ngIf="conversation.archived" class="close-conversation-button" ion-button clear item-end disabled padding>
      <!- - <ion-icon  style="display:block;" id="{{ 'close_button_icon' + conversation.uid }}" color="close-conversation" name="archive-outline" item-end></ion-icon> - ->
      <i class="material-icons" id="{{ 'close_button_icon' + conversation.uid }}"  item-end> history </i>
      <!- - <div item-end *ngIf="conversation.archived">{{ translationMap.get('CLOSED') }}</div> - ->
    </ion-button> -->
  </ion-buttons>

  

  <!-- && !conversation?.archived -->
  <div item-end class="notification_point"
    [ngClass]="{'notification_point-on-desktop': !isApp, 'notification_point-on-mobile': isApp }"
    *ngIf="conversation.is_new">
  </div>

</ion-item>